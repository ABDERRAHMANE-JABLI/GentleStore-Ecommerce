{% extends 'base.html.twig' %}

{% block title %}{{parent()}} | Product{% endblock %}

{% block body %}
    <div class="main_content">
    <div class="section">
        <div class="container">
            <div class="row">
                <div class="col-lg-6 col-md-6 mb-4 mb-md-0">
                    <div class="product-image">
                        <div class="product_img_box">
                            <img id="product_img" alt="product_img1"
                                src="/assets/images/products/{{product.imagesUrl[0]}}"
                                data-zoom-image="/assets/images/products/{{product.imagesUrl[0]}}" /><a
                                title="Zoom" class="product_img_zoom"><span class="linearicons-zoom-in"></span></a>
                        </div>
                       
                        <div id="pr_item_gallery" data-slides-to-show="{{product.imagesUrl | length}}" data-slides-to-scroll="1"
                            data-infinite="false"
                            class="product_gallery_item slick_slider slick-initialized slick-slider">
                            <div aria-live="polite" class="slick-list draggable">
                                <div class="slick-track" role="listbox" style="opacity: 1; width: 556px; left: 0px">
                                    
                                    <!--<div class="item slick-slide slick-current slick-active" data-slick-index="0"
                                        aria-hidden="false" tabindex="-1" role="option" aria-describedby="slick-slide20"
                                        style="width: 129px">
                                        <a href="#" class="product_gallery_item active"
                                            data-image="/assets/files/culottes/culotte_8/10518988473111520886581236853833613928085898971684087225041.webp"
                                            data-zoom-image="/assets/files/culottes/culotte_8/10518988473111520886581236853833613928085898971684087225041.webp"
                                            tabindex="0"><img alt="product_small_img1"
                                                src="/assets/files/culottes/culotte_8/10518988473111520886581236853833613928085898971684087225041.webp" /></a>
                                    </div>
                                    <div class="item slick-slide slick-active" data-slick-index="1" aria-hidden="false"
                                        tabindex="-1" role="option" aria-describedby="slick-slide21"
                                        style="width: 129px">
                                        <a href="#" class="product_gallery_item active"
                                            data-image="/assets/files/culottes/culotte_8/8858030309010591138243975967438607632572228411684087225104.webp"
                                            data-zoom-image="/assets/files/culottes/culotte_8/8858030309010591138243975967438607632572228411684087225104.webp"
                                            tabindex="0"><img alt="product_small_img1"
                                                src="/assets/files/culottes/culotte_8/8858030309010591138243975967438607632572228411684087225104.webp" /></a>
                                    </div>
                                    <div class="item slick-slide slick-active" data-slick-index="2" aria-hidden="false"
                                        tabindex="-1" role="option" aria-describedby="slick-slide22"
                                        style="width: 129px">
                                        <a href="#" class="product_gallery_item active"
                                            data-image="/assets/files/culottes/culotte_8/261752098622508939994245011589886325606197071684087225130.webp"
                                            data-zoom-image="/assets/files/culottes/culotte_8/261752098622508939994245011589886325606197071684087225130.webp"
                                            tabindex="0"><img alt="product_small_img1"
                                                src="/assets/files/culottes/culotte_8/261752098622508939994245011589886325606197071684087225130.webp" /></a>
                                    </div>-->
                                    {% for img in product.imagesUrl %}
                                    <div class="item slick-slide slick-active" data-slick-index="{{loop.index}}" aria-hidden="false"
                                        tabindex="-1" role="option" aria-describedby="slick-slide2{{loop.index}}"
                                        style="width: 129px">
                                        <a href="#" class="product_gallery_item active"
                                            data-image="/assets/images/products/{{img}}"
                                            data-zoom-image="/assets/images/products/{{img}}"
                                            tabindex="0"><img alt="product_small_img1"
                                                src="/assets/images/products/{{img}}"/></a>
                                    </div>
                                    {% endfor %}
                                    <input type="hidden" value ="{{product.id}}" id="product_id"/>
                                </div>
                            </div>
                            <!--bindings={
  "ng-reflect-ng-for-of": "/assets/f"
}-->
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6">
                    <div class="pr_detail">
                        <div class="product_description">
                            <h4 class="product_title">{{product.name | title }}</h4>
                            <div class="product_price">
                                <span class="price">{{(product.soldePrice / 100) | format_currency(app.session.get('settings').currency)}}</span><del>{{product.regularPrice / 100}}</del>
                                <div class="on_sale"><span> - {{((product.regularPrice - product.soldePrice) / 100) | format_currency(app.session.get('settings').currency)}}</span></div>
                            </div>
                            <div class="rating_wrap">
                                <div class="rating">
                                    <div class="product_rate" style="width: 80%"></div>
                                </div>
                                <span class="rating_num">(21)</span>
                            </div>
                            <div class="pr_desc mt-3">
                                <br><br/>
                                <p>{{product.description | title}}</p>
                            </div>
                            <div class="product_sort_info">
                                <ul>
                                    <li>
                                        <i class="linearicons-shield-check"></i>Brand : <strong>{{product.brand}}</strong>
                                    </li>
                                    <li><i class="linearicons-sync"></i> 30 Day Return Policy</li>
                                    <li>
                                        <i class="linearicons-bag-dollar"></i>Cash on Delivery
                                        available
                                    </li>
                                </ul>
                            </div>
                            <div class="pr_switch_wrap">
                                <span class="switch_lable">Size</span>
                                <div class="product_size_switch">
                                    <span>xs</span><span>s</span><span>m</span><span>l</span><span>xl</span>
                                </div>
                            </div>
                        </div>
                        <hr />
                        <div class="cart_extra">
                            <div class="cart-product-quantity">
                                <div class="quantity">
                                    <input type="number" name="quantity"
                                        value="1" title="Qty" size="4" min="1" max="{{product.stock}}" id="qte" class="qty" />
                                </div>
                            </div>
                            <div class="cart_btn">
                                <button type="button" class="btn btn-fill-out btn-addtocart" id="btn_add">
                                    <i class="icon-basket-loaded"></i> Add to cart
                                </button>
                                <button type="button"
                                    class="btn btn-fill-out btn-addtocart">
                                    <i class="icon-basket-loaded"></i> Pay Now
                                </button>
                            </div>
                            <div class="cart_btn">
                                <a href="#" class="add_compare"><i class="icon-shuffle"></i></a><a href="#"
                                    class="add_wishlist"><i class="icon-heart"></i></a>
                            </div>
                        </div>
                        <hr />
                        <!--
                        <ul class="product-meta">
                            <li>SKU: <a href="#">BE45VGRT</a></li>
                            <li>Category: <a href="#">Culotes </a></li>
                            <li>
                                Tags: <a href="#" rel="tag">Cloth</a>,
                                <a href="#" rel="tag">printed</a>
                            </li>
                        </ul>-->
                        <div class="product_share">
                            <span>Share:</span>
                            <ul class="social_icons">
                                <li>
                                    <a href="#"><i class="ion-social-facebook"></i></a>
                                </li>
                                <li>
                                    <a href="#"><i class="ion-social-twitter"></i></a>
                                </li>
                                <li>
                                    <a href="#"><i class="ion-social-googleplus"></i></a>
                                </li>
                                <li>
                                    <a href="#"><i class="ion-social-youtube-outline"></i></a>
                                </li>
                                <li>
                                    <a href="#"><i class="ion-social-instagram-outline"></i></a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <div class="large_divider clearfix"></div>
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <div class="tab-style3">
                        <ul role="tablist" class="nav nav-tabs">
                            <li class="nav-item">
                                <a id="Description-tab" data-bs-toggle="tab" href="#Description" role="tab"
                                    aria-controls="Description" aria-selected="true"
                                    class="nav-link active">Description</a>
                            </li>
                            <li class="nav-item">
                                <a id="Additional-info-tab" data-bs-toggle="tab" href="#Additional-info" role="tab"
                                    aria-controls="Additional-info" aria-selected="false" class="nav-link">Additional
                                    info</a>
                            </li>
                            <!--
                            <li class="nav-item">
                                <a id="Reviews-tab" data-bs-toggle="tab" href="#Reviews" role="tab"
                                    aria-controls="Reviews" aria-selected="false" class="nav-link">Reviews (2)</a>
                            </li>-->
                        </ul>
                        <div class="tab-content shop_info_tab">
                            <div id="Description" role="tabpanel" aria-labelledby="Description-tab"
                                class="tab-pane fade show active">
                                {{product.description}}
                            </div>
                            <div id="Additional-info" role="tabpanel" aria-labelledby="Additional-info-tab"
                                class="tab-pane fade">
                                {{product.moreDetails | raw }}
                            </div>
                            
                           <!-- <div id="Reviews" role="tabpanel" aria-labelledby="Reviews-tab" class="tab-pane fade">
                                <div class="comments">
                                    <h5 class="product_tab_title">
                                        2 Review For <span>Blue Dress For Woman</span>
                                    </h5>
                                    <ul class="list_none comment_list mt-4">
                                        <li>
                                            <div class="comment_img">
                                                <img src="assets/images/user1.jpg" alt="user1" />
                                            </div>
                                            <div class="comment_block">
                                                <div class="rating_wrap">
                                                    <div class="rating">
                                                        <div class="product_rate" style="width: 80%"></div>
                                                    </div>
                                                </div>
                                                <p class="customer_meta">
                                                    <span class="review_author">Alea Brooks</span><span
                                                        class="comment-date">March 5, 2018</span>
                                                </p>
                                                <div class="description">
                                                    <p>
                                                        Lorem Ipsumin gravida nibh vel velit auctor aliquet.
                                                        Aenean sollicitudin, lorem quis bibendum auctor,
                                                        nisi elit consequat ipsum, nec sagittis sem nibh id
                                                        elit. Duis sed odio sit amet nibh vulputate
                                                    </p>
                                                </div>
                                            </div>
                                        </li>
                                        <li>
                                            <div class="comment_img">
                                                <img src="assets/images/user2.jpg" alt="user2" />
                                            </div>
                                            <div class="comment_block">
                                                <div class="rating_wrap">
                                                    <div class="rating">
                                                        <div class="product_rate" style="width: 60%"></div>
                                                    </div>
                                                </div>
                                                <p class="customer_meta">
                                                    <span class="review_author">Grace Wong</span><span
                                                        class="comment-date">June 17, 2018</span>
                                                </p>
                                                <div class="description">
                                                    <p>
                                                        It is a long established fact that a reader will be
                                                        distracted by the readable content of a page when
                                                        looking at its layout. The point of using Lorem
                                                        Ipsum is that it has a more-or-less normal
                                                        distribution of letters
                                                    </p>
                                                </div>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                                <div class="review_form field_form">
                                    <h5>Add a review</h5>
                                    <form novalidate="" class="row mt-3 ng-untouched ng-pristine ng-valid">
                                        <div class="form-group col-12 mb-3">
                                            <div class="star_rating">
                                                <span data-value="1"><i class="far fa-star"></i></span><span
                                                    data-value="2"><i class="far fa-star"></i></span><span
                                                    data-value="3"><i class="far fa-star"></i></span><span
                                                    data-value="4"><i class="far fa-star"></i></span><span
                                                    data-value="5"><i class="far fa-star"></i></span>
                                            </div>
                                        </div>
                                        <div class="form-group col-12 mb-3">
                                            <textarea required="required" placeholder="Your review *" name="message"
                                                rows="4" class="form-control"></textarea>
                                        </div>
                                        <div class="form-group col-md-6 mb-3">
                                            <input required="required" placeholder="Enter Name *" name="name"
                                                type="text" class="form-control" />
                                        </div>
                                        <div class="form-group col-md-6 mb-3">
                                            <input required="required" placeholder="Enter Email *" name="email"
                                                type="email" class="form-control" />
                                        </div>
                                        <div class="form-group col-12 mb-3">
                                            <button type="submit" name="submit" value="Submit" class="btn btn-fill-out">
                                                Submit Review
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>-->
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <div class="small_divider"></div>
                    <div class="divider"></div>
                    <div class="medium_divider"></div>
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <div class="heading_s1">
                        <h3>Related Products</h3>
                    </div>
                    <div data-margin="20"
                        data-responsive='{"0":{"items": "1"}, "481":{"items": "2"}, "768":{"items": "3"}, "1199":{"items": "4"}}'
                        class="releted_product_slider carousel_slider owl-carousel owl-theme owl-loaded owl-drag">
                        <div class="owl-stage-outer">
                            <div class="owl-stage" style=" transform: translate3d(0px, 0px, 0px);transition: all 0s ease 0s;width: 1420px; ">
                                {% for product in  product.relatedProducts %}
									<div class="owl-item active" style="width: 264px; margin-right: 20px">
                                        <div class="item">
											{% include "product/displayProduct.html.twig" %}
										</div>
                                    </div>
								{% endfor %}
                            </div>
                        </div>
                        <div class="owl-nav disabled">
                            <button type="button" role="presentation" class="owl-prev">
                                <i class="ion-ios-arrow-left"></i></button><button type="button" role="presentation"
                                class="owl-next">
                                <i class="ion-ios-arrow-right"></i>
                            </button>
                        </div>
                        <div class="owl-dots">
                            <button role="button" class="owl-dot active"><span></span></button><button role="button"
                                class="owl-dot"><span></span></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block javascripts %}
<script>

	window.onload = ()=> {
			const btn = document.querySelector('#btn_add');
            const qte = document.querySelector('#qte');
            const id = document.querySelector('#product_id');
				btn.addEventListener('click',async function(e){
					e.preventDefault();
					//request : 
                    let url = `/cart/add/${id.value}/${qte.value}`
					const result = await fetchData(url);
					if(result){//response
						updateCartHeader(result);
                        window.location.href = '{{ path('app_cart') }}';
					}else{
						errorMSG('Error','Please Try Again');
					}
				});

            const links = document.querySelectorAll('.action_add');
			links.forEach((link)=>{
				link.addEventListener('click',async function(e){
					e.preventDefault();
                    var href = link.href;
					//request : 
					const result = await fetchData(href);
					if(result){//response
						updateCartHeader(result);
                        window.location.href = '{{ path('app_cart') }}';
					}else{
						errorMSG('Error','Please Try Again');
					}
				});
			})
    }

</script>
{% endblock %}
